<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="/styles/styles.css" type="text/css" />
		<title>Create new customer</title>
	</head>
	<body>
		<section class="section">
			<div class="title-wrapper">
				<h2 class="title">Create new customer</h2>
			</div>

			<div class="section-center">
				<form action="/customers" method="POST" id="form">
					<div class="form-group">
						<label for="customerId">customerId</label>
						<input
							type="number"
							id="customerId"
							name="customerId"
							size="4"
							required
						/>
					</div>

					<div class="form-group">
						<label for="firstname">firstname</label>
						<input
							type="text"
							id="firstname"
							name="firstname"
							size="15"
							required
						/>
					</div>

					<div class="form-group">
						<label for="lastname">lastname</label>
						<input
							type="text"
							id="lastname"
							name="lastname"
							size="25"
							required
						/>
					</div>

					<div class="form-group">
						<label for="favoriteIceCream">favoriteIceCream</label>
						<input
							type="text"
							id="favoriteIceCream"
							name="favoriteIceCream"
							size="15"
							required
						/>
					</div>

					<div class="form-group">
						<label for="customerClass">customerClass</label>
						<input
							type="text"
							id="customerClass"
							name="customerClass"
							size="5"
							required
						/>
					</div>

					<button type="submit" class="btn">Submit</button>
				</form>

				<a href="/"><button class="btn">Menu</button></a>
			</div>
		</section>

		<script>
			const form = document.getElementById('form');
			form.addEventListener('submit', async (e) => {
				e.preventDefault();
				// 1.get value from fields
				const customerId = parseInt(form.customerId.value);
				const firstname = form.firstname.value;
				const lastname = form.lastname.value;
				const favoriteIceCream = form.favoriteIceCream.value;
				const customerClass = form.customerClass.value;

				// 3.make a post request to backend
				const res = await fetch('/customers', {
					method: 'POST',
					// 2.form a json object from the fields
					body: JSON.stringify({
						customerId,
						firstname,
						lastname,
						favoriteIceCream,
						customerClass,
					}),
					headers: { 'Content-Type': 'application/json' },
				});

				const data = res.text();
				console.log(data);
			});
		</script>
	</body>
</html>
